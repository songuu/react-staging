import e from"fs-extra";import n from"node:path";import{fileURLToPath as o}from"node:url";import*as t from"@clack/prompts";import{grey as c,red as a,bold as i,cyan as r,blue as s}from"kleur/colors";import l from"minimist";const p={sort:0,name:"English",hnay:"Has not adapted yet",pn:"Please enter the project name",pncbne:"Project name cannot be empty",pane:"Project name already exists",psat:"Please select a template",oc:"Operation cancelled",pca:"Please choose again",cfsing:"Creating file...",pcsucc:"Project created successfully",tgs:"To get started:",pcyt_vt:"Tip: Please configure your color system in the tailwind.config.js file",pcyt_vu:"Tip: Please configure your color system in the uno.config.js file",cferror:"Failed to create file",pectn:"Please enter the correct template name!"};var u=Object.freeze({__proto__:null,de_DE:{sort:8,name:"Deutsch",hnay:"Noch nicht angepasst",pn:"Bitte geben Sie den Projektnamen ein",pncbne:"Projektname darf nicht leer sein",pane:"Projektname existiert bereits",psat:"Bitte wählen Sie eine Vorlage aus",oc:"Vorgang abgebrochen",pca:"Bitte wählen Sie erneut",cfsing:"Erstelle Datei...",pcsucc:"Projekt erfolgreich erstellt",tgs:"Um zu beginnen:",pcyt_vt:"Tipp: Bitte konfigurieren Sie Ihr Farbsystem in der Datei tailwind.config.js",pcyt_vu:"Tipp: Bitte konfigurieren Sie Ihr Farbsystem in der Datei uno.config.js",cferror:"Fehler beim Erstellen der Datei",pectn:"Bitte geben Sie den richtigen Vorlagennamen ein!"},en_US:p,es_ES:{sort:5,name:"Español",hnay:"Aún no se ha adaptado",pn:"Por favor ingrese el nombre del proyecto",pncbne:"El nombre del proyecto no puede estar vacío",pane:"El nombre del proyecto ya existe",psat:"Por favor seleccione una plantilla",oc:"Operación cancelada",pca:"Por favor, elija de nuevo",cfsing:"Creando archivo...",pcsucc:"Proyecto creado con éxito",tgs:"Para empezar:",pcyt_vt:"Consejo: configure su sistema de colores en el archivo tailwind.config.js",pcyt_vu:"Consejo: configure su sistema de colores en el archivo uno.config.js",cferror:"Error al crear archivo",pectn:"¡Por favor ingrese el nombre de la plantilla correcto!"},fr_FR:{sort:7,name:"Français",hnay:"N'a pas encore adapté",pn:"Veuillez saisir le nom du projet",pncbne:"Le nom du projet ne peut pas être vide",pane:"Le nom du projet existe déjà",psat:"Veuillez sélectionner un modèle",oc:"Opération annulée",pca:"Veuillez choisir à nouveau",cfsing:"Création de fichier...",pcsucc:"Projet créé avec succès",tgs:"Pour commencer:",pcyt_vt:"Conseil: veuillez configurer votre système de couleurs dans le fichier tailwind.config.js",pcyt_vu:"Conseil: veuillez configurer votre système de couleurs dans le fichier uno.config.js",cferror:"Échec de la création du fichier",pectn:"Veuillez saisir le nom du modèle correct!"},it_IT:{sort:9,name:"Italiano",hnay:"Non ancora adattato",pn:"Inserisci il nome del progetto",pncbne:"Il nome del progetto non può essere vuoto",pane:"Il nome del progetto esiste già",psat:"Seleziona un modello",oc:"Operazione annullata",pca:"Seleziona di nuovo",cfsing:"Creazione del file in corso...",pcsucc:"Progetto creato con successo",tgs:"Per iniziare:",pcyt_vt:"Suggerimento: configura il tuo sistema di colori nel file tailwind.config.js",pcyt_vu:"Suggerimento: configura il tuo sistema di colori nel file uno.config.js",cferror:"Impossibile creare il file",pectn:"Inserisci il nome del modello corretto!"},ja_JP:{sort:3,name:"日本語",hnay:"まだ適応されていません",pn:"プロジェクト名を入力してください",pncbne:"プロジェクト名は空にできません",pane:"プロジェクト名が既に存在します",psat:"テンプレートを選択してください",oc:"操作がキャンセルされました",pca:"もう一度選択してください",cfsing:"ファイルを作成しています...",pcsucc:"プロジェクトが正常に作成されました",tgs:"開始：",pcyt_vt:"ヒント：tailwind.config.js ファイルでカラーシステムを構成してください",pcyt_vu:"ヒント：uno.config.js ファイルでカラーシステムを構成してください",cferror:"ファイルの作成に失敗しました",pectn:"正しいテンプレート名を入力してください！"},ko_KR:{sort:4,name:"한국어",hnay:"아직 적응하지 못했습니다",pn:"프로젝트 이름을 입력하십시오",pncbne:"프로젝트 이름은 비워 둘 수 없습니다",pane:"프로젝트 이름이 이미 있습니다",psat:"템플릿을 선택하십시오",oc:"작업이 취소되었습니다",pca:"다시 선택하십시오",cfsing:"파일을 만드는 중입니다...",pcsucc:"프로젝트가 성공적으로 생성되었습니다",tgs:"시작：",pcyt_vt:"팁：tailwind.config.js 파일에서 색상 시스템을 구성하십시오",pcyt_vu:"팁：uno.config.js 파일에서 색상 시스템을 구성하십시오",cferror:"파일 생성 실패",pectn:"올바른 템플릿 이름을 입력하십시오!"},ru_RU:{sort:6,name:"Русский",hnay:"Еще не адаптировано",pn:"Пожалуйста, введите название проекта",pncbne:"Название проекта не может быть пустым",pane:"Название проекта уже существует",psat:"Пожалуйста, выберите шаблон",oc:"Операция отменена",pca:"Пожалуйста, выберите снова",cfsing:"Создание файла...",pcsucc:"Проект успешно создан",tgs:"Чтобы начать:",pcyt_vt:"Совет: настройте свою цветовую систему в файле tailwind.config.js",pcyt_vu:"Совет: настройте свою цветовую систему в файле uno.config.js",cferror:"Не удалось создать файл",pectn:"Пожалуйста, введите правильное имя шаблона!"},zh_CN:{sort:1,name:"简体中文",hnay:"暂未适配",pn:"请输入项目名称",pncbne:"项目名称不能为空",pane:"项目名称已存在",psat:"请选择一个模板",oc:"操作已取消",pca:"请重新选择",cfsing:"正在创建文件...",pcsucc:"项目创建成功",tgs:"开始：",pcyt_vt:"提示：请到 tailwind.config.js 文件内配置你的颜色系统",pcyt_vu:"提示：请到 uno.config.js 文件内配置你的颜色系统",cferror:"创建文件失败",pectn:"请输入正确的模板名称！"},zh_TW:{sort:2,name:"繁體中文",hnay:"暫未適配",pn:"請輸入項目名稱",pncbne:"項目名稱不能為空",pane:"項目名稱已存在",psat:"請選擇一個模板",oc:"操作已取消",pca:"請重新選擇",cfsing:"正在創建文件...",pcsucc:"項目創建成功",tgs:"開始：",pcyt_vt:"提示：請到 tailwind.config.js 文件內配置你的顏色系統",pcyt_vu:"提示：請到 uno.config.js 文件內配置你的顏色系統",cferror:"創建文件失敗",pectn:"請輸入正確的模板名稱！"}});const{version:g}=JSON.parse(e.readFileSync(new URL("../package.json",import.meta.url),"utf-8"));console.log(`\n${c(`create-staging@${g}\n`)}`);const f=t.spinner();t.intro("Welcome to use staging!");let m=p;const d=[];for(const e in u)d.push({value:e,label:u[e].name,sort:u[e].sort});d.sort(((e,n)=>e.sort-n.sort));const y=l(process.argv.slice(2)),v=y._[0],h=y.template||y.t,j=y.language||y.l;m=j&&d.find((e=>e.value===j))?u[j]:p;const _=[{value:"vtr",label:"React + Vite + Tailwind",template:"react-vite-tailwind",finish:!0}];if(v&&!h)b(v,_[0]);else if(v&&h){const e=_.find((e=>e.value===h));e?e.finish?b(v,e):t.intro(a(e.label+" "+m.hnay)):t.intro(a(m.pectn))}else(async()=>{const n=await t.select({message:i("Please select your preferred language"),options:d});t.isCancel(n)&&(t.cancel(a("⛔ ")+m.oc),process.exit(0)),m=u[n];let o=await t.select({message:i(m.psat),options:_});for(t.isCancel(o)&&(t.cancel(a("⛔ ")+m.oc),process.exit(0));!_.find((e=>e.value===o))?.finish;)t.isCancel(o)&&(t.cancel(a("⛔ ")+m.oc),process.exit(0)),t.intro(a(_.find((e=>e.value===o)).label+" "+m.hnay+" "+m.pca)),o=await t.select({message:i(m.psat),options:_});const c=await t.text({message:i(m.pn),placeholder:"staging-project",validate:n=>n?e.existsSync(n)?m.pane:void 0:m.pncbne});t.isCancel(c)&&(t.cancel(a("⛔ ")+m.oc),process.exit(0)),_.forEach((async e=>{e.value===o&&b(c,e)}))})();function b(c,l){"number"==typeof c&&(c=c.toString());const p=n.join(n.resolve(),c);f.start("🚀 "+m.cfsing),e.mkdirSync(p);const u=n.resolve(o(import.meta.url),"../..",`templates/${l.template}`);e.copy(u,p).then((()=>{f.stop(),t.outro(`${c} - ${m.pcsucc} 🎉`);const n=JSON.parse(e.readFileSync(`${p}/package.json`,"utf-8"));n.name=c,e.writeFileSync(`${p}/package.json`,JSON.stringify(n,null,4),"utf-8");const o={vite:n.devDependencies.vite.replace("^",""),react:n.dependencies.react.replace("^",""),tailwindcss:n.devDependencies.tailwindcss.replace("^","")};let a="";for(const e in o)a+=i(e)+": "+r(o[e])+" ";console.log(`📦 ${a}\n                `),console.log(`👉 ${i(m.tgs)}\n\n    ${s(`cd ${c}`)}\n    ${s("pnpm i / npm i / yarn")}\n    ${s("npm run dev")}\n    `)})).catch((e=>{f.stop(),console.error(a(m.cferror+"--"+e))}))}
